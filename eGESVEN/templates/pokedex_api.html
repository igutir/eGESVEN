{% extends "base.html" %}

{% block css %}
<style>
    @import url('https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;600;700;800;900&display=swap');

    :root {
        --clr-black: #1b1717;
        --clr-gray: #ececec;
        --clr-white: #f7f7f7;
        

        --type-normal: #A8A878;
        --type-fire: #F08030;
        --type-water: #6890F0;
        --type-grass: #78C850;
        --type-electric: #F8D030;
        --type-ice: #98D8D8;
        --type-fighting: #C03028;
        --type-poison: #A040A0;
        --type-ground: #E0C068;
        --type-flying: #A890F0;
        --type-psychic: #F85888;
        --type-bug: #A8B820;
        --type-rock: #B8A038;
        --type-ghost: #705898;
        --type-dark: #705848;
        --type-dragon: #7038F8;
        --type-steel: #B8B8D0;
        --type-fairy: #F0B6BC;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        color: var(--clr-black);
        font-family: 'Rubik', sans-serif;
    }

    ul {
        list-style-type: none;
    }

    button {
        background-color: transparent;
        border: 0;
        border-radius: 0;
    }

    body {
        min-height: 100vh;
        background-color: var(--clr-black);
    }


    .centered-link {
            display: flex;
            justify-content: center;
            align-items: center;
    }
    

    .nav-link1{
        background-color: var(--clr-white);
        color: var(--clr-black);
        padding: .5rem;
        border-radius: 100vmax;
        cursor: pointer;
        text-transform: uppercase;
        font-weight: 600;
        box-shadow: 0 0 1rem rgba(255, 0, 0, 0.521);
        transition: .2s;
    }

    .nav1 {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        align-items: flex-start;
        padding-inline: 2rem;
        max-width: 1000px;
        margin: 0 auto;
    }

    .nav-list {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        gap: .5rem;
    }

    .btn-header {
        background-color: var(--clr-black);
        padding: .5rem;
        border-radius: 100vmax;
        cursor: pointer;
        text-transform: uppercase;
        font-weight: 600;
        box-shadow: 0 0 1rem rgba(255, 0, 0, 0.521);
        transition: .2s;
    }

    .btn-header:hover {
        transform: scale(1.1);
        box-shadow: 0 0 2rem rgba(255, 0, 0, 0.568);
    }

    main {
        padding: 2rem;
        max-width: 1500px;
        margin: 0 auto;
    }

    .pokemon-todos {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
    }

    @media screen and (min-width: 470px) {
        .pokemon-todos {
            grid-template-columns: 1fr 1fr;
        }
    }

    @media screen and (min-width: 700px) {
        .pokemon-todos {
            grid-template-columns: 1fr 1fr 1fr;
        }
    }

    .pokemon {
        border-radius: 1rem;
        background-color: var(--clr-white);
        box-shadow: 0 0 3rem -1rem rgba(0, 0, 0, .25);
        padding-block: 1rem;
        text-transform: uppercase;
        position: relative;
        isolation: isolate;
        overflow: hidden;
    }

    .pokemon-id-back {
        position: absolute;
        top: 1rem;
        left: 50%;
        transform: translateX(-50%);
        font-size: 6rem;
        font-weight: 800;
        z-index: -1;
        color: var(--clr-gray);
    }

    .pokemon-imagen {
        padding-inline: 1rem;
        display: flex;
        justify-content: center;
    }

    .pokemon-imagen img {
        width: 100%;
        max-width: 10rem;
    }

    .pokemon-info {
        display: flex;
        flex-direction: column;
        gap: .5rem;
        padding-inline: 1rem;
        align-items: center;
        text-align: center;
    }

    .nombre-contenedor {
        display: flex;
        align-items: center;
        column-gap: .5rem;
        flex-wrap: wrap;
        justify-content: center;
    }

    .pokemon-id {
        background-color: var(--clr-gray);
        padding: .25rem .5rem;
        border-radius: 100vmax;
        font-size: .75rem;
        font-weight: 500;
    }

    .pokemon-nombre {
        font-size: 1.4rem;
    }

    .pokemon-tipos {
        display: flex;
        gap: .5rem;
        font-size: .75rem;
        font-weight: 500;
        flex-wrap: wrap;
        justify-content: center;
    }

    .tipo {
        padding: .25rem .5rem;
        border-radius: 100vmax;
    }

    .pokemon-stats {
        display: flex;
        gap: 1rem;
        font-size: .85rem;
    }

    .stat {
        background-color: var(--clr-gray);
        padding: .25rem .5rem;
        border-radius: 100vmax;
    }



    .normal {
        background-color: var(--type-normal);
        color: var(--clr-black);
    }

    .fire {
        background-color: var(--type-fire);
        color: var(--clr-black);
    }

    .water {
        background-color: var(--type-water);
        color: var(--clr-white);
    }

    .grass {
        background-color: var(--type-grass);
        color: var(--clr-black);
    }

    .electric {
        background-color: var(--type-electric);
        color: var(--clr-black);
    }

    .ice {
        background-color: var(--type-ice);
        color: var(--clr-black);
    }

    .fighting {
        background-color: var(--type-fighting);
        color: var(--clr-white);
    }

    .poison {
        background-color: var(--type-poison);
        color: var(--clr-white);
    }

    .ground {
        background-color: var(--type-ground);
        color: var(--clr-black);
    }

    .flying {
        background-color: var(--type-flying);
        color: var(--clr-black);
    }

    .psychic {
        background-color: var(--type-psychic);
        color: var(--clr-black);
    }

    .bug {
        background-color: var(--type-bug);
        color: var(--clr-black);
    }

    .rock {
        background-color: var(--type-rock);
        color: var(--clr-black);
    }

    .ghost {
        background-color: var(--type-ghost);
        color: var(--clr-white);
    }

    .dark {
        background-color: var(--type-dark);
        color: var(--clr-white);
    }

    .dragon {
        background-color: var(--type-dragon);
        color: var(--clr-white);
    }

    .steel {
        background-color: var(--type-steel);
        color: var(--clr-black);
    }

    .fairy {
        background-color: var(--type-fairy);
        color: var(--clr-black);
    }
</style>
{% endblock %}

{% block contenido %}

<div class="centered-link">
    <a class="nav-link1" href="{% url 'quepokemoneres' %}">Que pokemon eres</a>
</div>

<br>

<nav class="nav1">
    <ul class="nav-list">
        <li class="nav-item"><button class="btn btn-header" id="ver-todos">Ver todos</button></li>
        <li class="nav-item"><button class="btn btn-header normal" id="normal">Normal</button></li>
        <li class="nav-item"><button class="btn btn-header fire" id="fire">FUEGO</button></li>
        <li class="nav-item"><button class="btn btn-header water" id="water">AGUA</button></li>
        <li class="nav-item"><button class="btn btn-header grass" id="grass">PLANTA</button></li>
        <li class="nav-item"><button class="btn btn-header electric" id="electric">ELECTRICO</button></li>
        <li class="nav-item"><button class="btn btn-header ice" id="ice">HIELO</button></li>
        <li class="nav-item"><button class="btn btn-header fighting" id="fighting">LUCHA</button></li>
        <li class="nav-item"><button class="btn btn-header poison" id="poison">VENENO</button></li>
        <li class="nav-item"><button class="btn btn-header ground" id="ground">TIERRA</button></li>
        <li class="nav-item"><button class="btn btn-header flying" id="flying">VOLADOR</button></li>
        <li class="nav-item"><button class="btn btn-header psychic" id="psychic">PSIQUICO</button></li>
        <li class="nav-item"><button class="btn btn-header bug" id="bug">BICHO</button></li>
        <li class="nav-item"><button class="btn btn-header rock" id="rock">ROCA</button></li>
        <li class="nav-item"><button class="btn btn-header ghost" id="ghost">FANTASMA</button></li>
        <li class="nav-item"><button class="btn btn-header dark" id="dark">SINIESTRO</button></li>
        <li class="nav-item"><button class="btn btn-header dragon" id="dragon">DRAGON</button></li>
        <li class="nav-item"><button class="btn btn-header steel" id="steel">ACERO</button></li>
        <li class="nav-item"><button class="btn btn-header fairy" id="fairy">HADA</button></li>
    </ul>
</nav>


        
    <div id="todos">
        <div class="pokemon-todos" id="listaPokemon">
            
        </div>
    </div>




{% endblock %}

{% block js %}

<script>
const listaPokemon = document.querySelector("#listaPokemon");
const botonesHeader = document.querySelectorAll(".btn-header");
let URL = "https://pokeapi.co/api/v2/pokemon/";

for (let i = 1; i <= 151; i++) {
    fetch(URL + i)
        .then((response) => response.json())
        .then(data => mostrarPokemon(data))
}

function mostrarPokemon(poke) {

    let tipos = poke.types.map((type) => `<p class="${type.type.name} tipo">${type.type.name}</p>`);
    tipos = tipos.join('');

    let pokeId = poke.id.toString();
    if (pokeId.length === 1) {
        pokeId = "00" + pokeId;
    } else if (pokeId.length === 2) {
        pokeId = "0" + pokeId;
    }


    const div = document.createElement("div");
    div.classList.add("pokemon");
    div.innerHTML = `
        <p class="pokemon-id-back">#${pokeId}</p>
        <div class="pokemon-imagen">
            <img src="${poke.sprites.other["official-artwork"].front_default}" alt="${poke.name}">
        </div>
        <div class="pokemon-info">
            <div class="nombre-contenedor">
                <p class="pokemon-id">#${pokeId}</p>
                <h2 class="pokemon-nombre">${poke.name}</h2>
            </div>
            <div class="pokemon-tipos">
                ${tipos}
            </div>
            <div>
                <h5>Tamaño y peso</h5>
            </div>
            <div class="pokemon-stats">
                <p class="stat">${poke.height}m</p>
                <p class="stat">${poke.weight}kg</p>
            </div>
        </div>
    `;
    listaPokemon.append(div);
}

botonesHeader.forEach(boton => boton.addEventListener("click", (event) => {
    const botonId = event.currentTarget.id;

    listaPokemon.innerHTML = "";

    for (let i = 1; i <= 151; i++) {
        fetch(URL + i)
            .then((response) => response.json())
            .then(data => {

                if(botonId === "ver-todos") {
                    mostrarPokemon(data);
                } else {
                    const tipos = data.types.map(type => type.type.name);
                    if (tipos.some(tipo => tipo.includes(botonId))) {
                        mostrarPokemon(data);
                    }
                }

            })
    }
}))


</script>


{% endblock %}